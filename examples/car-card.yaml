type: picture-elements
image: /local/prizrak/car-base.png
aspect_ratio: 56%

elements:
  # Autolaunch mode (ignition on) - white outline with lights
  - type: conditional
    conditions:
      - entity: sensor.prizrak_95311_ignition
        state: 'On'
    elements:
      - type: image
        image: /local/prizrak/car-autolaunch.svg
        style:
          top: 50%
          left: 50%
          width: 100%
        tap_action: none
      - type: image
        image: /local/prizrak/car-engine-icon.svg
        style:
          top: 20%
          left: 50%
          width: 10%
        tap_action: none

  # Guard mode (when not in autolaunch) - blue rounded rectangle glow
  - type: conditional
    conditions:
      - entity: sensor.prizrak_95311_guard
        state_not: 'SafeGuardOff'
      - entity: sensor.prizrak_95311_ignition
        state_not: 'On'
    elements:
      - type: image
        image: /local/prizrak/car-guard-glow.svg
        style:
          top: 50%
          left: 50%
          width: 100%
        tap_action: none

  # Driver door
  - type: conditional
    conditions:
      - entity: binary_sensor.prizrak_95311_driver_door
        state: 'on'
    elements:
      - type: image
        image: /local/prizrak/car-left.png
        style:
          top: 50%
          left: 50%
          width: 100%
        tap_action: none
      - type: image
        image: /local/prizrak/car-door-driver.svg
        style:
          top: 50%
          left: 50%
          width: 100%
        tap_action: none

  # Front passenger door
  - type: conditional
    conditions:
      - entity: binary_sensor.prizrak_95311_front_pass_door
        state: 'on'
    elements:
      - type: image
        image: /local/prizrak/car-right.png
        style:
          top: 50%
          left: 50%
          width: 100%
        tap_action: none
      - type: image
        image: /local/prizrak/car-door-passenger.svg
        style:
          top: 50%
          left: 50%
          width: 100%
        tap_action: none

  # Rear left door
  - type: conditional
    conditions:
      - entity: binary_sensor.prizrak_95311_rear_left_door
        state: 'on'
    elements:
      - type: image
        image: /local/prizrak/car-left.png
        style:
          top: 50%
          left: 50%
          width: 100%
        tap_action: none
      - type: image
        image: /local/prizrak/car-door-rear-left.svg
        style:
          top: 50%
          left: 50%
          width: 100%
        tap_action: none

  # Rear right door
  - type: conditional
    conditions:
      - entity: binary_sensor.prizrak_95311_rear_right_door
        state: 'on'
    elements:
      - type: image
        image: /local/prizrak/car-right.png
        style:
          top: 50%
          left: 50%
          width: 100%
        tap_action: none
      - type: image
        image: /local/prizrak/car-door-rear-right.svg
        style:
          top: 50%
          left: 50%
          width: 100%
        tap_action: none

  # Hood
  - type: conditional
    conditions:
      - entity: binary_sensor.prizrak_95311_hood
        state: 'on'
    elements:
      - type: image
        image: /local/prizrak/car-top.png
        style:
          top: 50%
          left: 50%
          width: 100%
        tap_action: none
      - type: image
        image: /local/prizrak/car-door-hood.svg
        style:
          top: 50%
          left: 50%
          width: 100%
        tap_action: none

  # Trunk
  - type: conditional
    conditions:
      - entity: binary_sensor.prizrak_95311_trunk
        state: 'on'
    elements:
      - type: image
        image: /local/prizrak/car-bottom.png
        style:
          top: 50%
          left: 50%
          width: 100%
        tap_action: none
      - type: image
        image: /local/prizrak/car-door-trunk.svg
        style:
          top: 50%
          left: 50%
          width: 100%
        tap_action: none

  # Lock icon (when guard is on)
  - type: conditional
    conditions:
      - entity: sensor.prizrak_95311_guard
        state_not: 'SafeGuardOff'
    elements:
      - type: image
        image: /local/prizrak/lock-closed.svg
        style:
          top: 50%
          left: 50%
          width: 8%
        tap_action: none

  # Speed display (shown when ignition is on)
  - type: conditional
    conditions:
      - entity: sensor.prizrak_95311_ignition
        state: 'On'
    elements:
      - type: state-label
        entity: sensor.prizrak_95311_speed
        style:
          bottom: 16%
          left: 15%
          font-size: 20px
          font-weight: bold
          color: white
          text-shadow: 2px 2px 4px rgba(0,0,0,0.9)
        suffix: ' km/h'
      - type: icon
        icon: mdi:speedometer
        style:
          bottom: 12%
          left: 15%
          color: rgba(255,255,255,0.9)

  # RPM display (shown when ignition is on)
  - type: conditional
    conditions:
      - entity: sensor.prizrak_95311_ignition
        state: 'On'
    elements:
      - type: state-label
        entity: sensor.prizrak_95311_rpm
        style:
          bottom: 16%
          right: 15%
          font-size: 20px
          font-weight: bold
          color: white
          text-shadow: 2px 2px 4px rgba(0,0,0,0.9)
        suffix: ' RPM'
      - type: icon
        icon: mdi:engine
        style:
          bottom: 12%
          right: 15%
          color: rgba(255,255,255,0.9)

  # Battery voltage - top left
  - type: icon
    icon: mdi:car-battery
    style:
      top: 4%
      left: 8%
      color: rgba(255,255,255,0.9)
      --mdc-icon-size: 20px

  - type: state-label
    entity: sensor.prizrak_95311_battery_voltage
    style:
      top: 10%
      left: 8%
      font-size: 18px
      font-weight: bold
      color: white
      text-shadow: 2px 2px 4px rgba(0,0,0,0.8)
    suffix: ' В'

  # Engine temperature - top right (icon and value)
  - type: icon
    icon: mdi:engine
    style:
      top: 4%
      right: 8%
      color: rgba(255,255,255,0.9)
      --mdc-icon-size: 20px

  - type: state-label
    entity: sensor.prizrak_95311_engine_temperature
    style:
      top: 10%
      right: 8%
      font-size: 18px
      font-weight: bold
      color: white
      text-shadow: 2px 2px 4px rgba(0,0,0,0.8)
    state_filter:
      "unavailable": "--"
      "unknown": "--"
      "Unknown": "--"
    suffix: ' °C'

  # Fuel level - bottom left
  - type: icon
    icon: mdi:gas-station
    style:
      bottom: 20%
      left: 8%
      color: rgba(255,255,255,0.9)
      --mdc-icon-size: 20px

  - type: state-label
    entity: sensor.prizrak_95311_fuel_level
    style:
      bottom: 14%
      left: 8%
      font-size: 18px
      font-weight: bold
      color: white
      text-shadow: 2px 2px 4px rgba(0,0,0,0.8)
    suffix: ' л'

  # Outside temperature - bottom right (value above icon)
  - type: state-label
    entity: sensor.prizrak_95311_outside_temperature
    style:
      bottom: 20%
      right: 8%
      font-size: 18px
      font-weight: bold
      color: white
      text-shadow: 2px 2px 4px rgba(0,0,0,0.8)
    state_filter:
      "unavailable": "--"
      "unknown": "--"
      "Unknown": "--"
    suffix: ' °C'

  - type: icon
    icon: mdi:thermometer
    style:
      bottom: 14%
      right: 8%
      color: rgba(255,255,255,0.9)
      --mdc-icon-size: 20px

  # Inside temperature - center
  - type: state-label
    entity: sensor.prizrak_95311_temperature
    style:
      top: 54%
      left: 50%
      font-size: 20px
      font-weight: bold
      color: white
      text-shadow: 2px 2px 4px rgba(0,0,0,0.8)
    state_filter:
      "unavailable": "--"
      "unknown": "--"
      "Unknown": "--"
    suffix: ' °C'

  # Guard button - inactive (gray) when guard is OFF
  - type: conditional
    conditions:
      - entity: sensor.prizrak_95311_guard
        state: 'SafeGuardOff'
    elements:
      - type: icon
        icon: mdi:shield-lock
        style:
          top: 92%
          left: 30%
          --mdc-icon-size: 50px
          color: rgba(150,150,150,0.8)
        tap_action:
          action: none
        hold_action:
          action: call-service
          service: button.press
          service_data:
            entity_id: button.prizrak_95311_guard_on
          confirmation:
            text: Включить охрану?

  # Guard button - active (blue) when guard is ON
  - type: conditional
    conditions:
      - entity: sensor.prizrak_95311_guard
        state_not: 'SafeGuardOff'
    elements:
      - type: icon
        icon: mdi:shield-lock
        style:
          top: 92%
          left: 30%
          --mdc-icon-size: 50px
          color: rgba(33,150,243,1)
        tap_action:
          action: none
        hold_action:
          action: call-service
          service: button.press
          service_data:
            entity_id: button.prizrak_95311_guard_off
          confirmation:
            text: Выключить охрану?

  # Autolaunch button - inactive (gray) when engine is OFF
  - type: conditional
    conditions:
      - entity: sensor.prizrak_95311_ignition
        state_not: 'On'
    elements:
      - type: icon
        icon: mdi:engine
        style:
          top: 92%
          left: 70%
          --mdc-icon-size: 50px
          color: rgba(150,150,150,0.8)
        tap_action:
          action: none
        hold_action:
          action: call-service
          service: button.press
          service_data:
            entity_id: button.prizrak_95311_autolaunch_on
          confirmation:
            text: Запустить двигатель?

  # Autolaunch button - active (orange) when engine is ON
  - type: conditional
    conditions:
      - entity: sensor.prizrak_95311_ignition
        state: 'On'
    elements:
      - type: icon
        icon: mdi:engine
        style:
          top: 92%
          left: 70%
          --mdc-icon-size: 50px
          color: rgba(255,152,0,1)
        tap_action:
          action: none
        hold_action:
          action: call-service
          service: button.press
          service_data:
            entity_id: button.prizrak_95311_autolaunch_off
          confirmation:
            text: Заглушить двигатель?
